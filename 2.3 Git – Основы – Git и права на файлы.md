

1. **Как Unix-права хранятся в Git**
    
    - Git сохраняет **только два бита** разрешений:
        
        - **исполняемый (x)** — если файл помечен как исполняемый, Git запомнит это.
            
        - **символьная ссылка (symlink)** — Git хранит спец-объект вместо содержимого.
            
    - Все остальные биты (r/w для владельца, группы, остальных) **не входят** в снимок коммита.
        
2. **Почему так?**
    
    - Цель Git — кроссплатформенность: одинаковая история на Windows, Linux, macOS.
        
    - Базовые «читать/писать» права задаются файловой системой конкретной машины при checkout.
        
3. **Проверка и изменение исполняемого бита**
    
    - Чтобы сделать файл исполняемым в истории:
        
        ```bash
        chmod +x script.sh
        git add script.sh
        git commit -m "chore: make script executable"
        ```
        
    - Убрать флаг: `chmod -x script.sh` → `git add` → `git commit`.
        
    - Проверка флага в репозитории: `git ls-files --stage | grep script.sh`
        
        - В начале строки 100755 — исполняемый, 100644 — обычный.
            
4. **Настройка core.fileMode**
    
    - `git config core.fileMode false` — Git игнорирует изменения обычных rw-битов (по умолчанию на Windows).
        
    - `true` — Git сравнивает биты rwx и будет показывать модификации, даже если содержимое не менялось (актуально на Linux).
        
5. **Символьные ссылки**
    
    - Создание: `ln -s target linkname` → `git add linkname`.
        
    - В истории хранится текст «путь-назначение», а не содержимое файла.
        
    - На Windows checkout ссылки возможен только в средах с поддержкой (WSL, Git Bash + настроенные Developer Mode / admin).
        
6. **Частые проблемы**
    
    - **“File changed mode from 100644 to 100755”**: кто-то сделал `chmod +x`.
        
        - Если флаг лишний — `chmod -x` и новый коммит.
            
    - **Нежелательные изменения прав после клона**: выставьте `core.fileMode false` локально.
        
    - **Скрипты не запускаются после клона** (x потерялся) — проверьте, что в истории он 100755.
        

---
